import{U as Z,r as o,b4 as G,x as i,j as e,a2 as x,G as h,H as w,aC as X,X as Y,b5 as J,aI as K,aZ as ee,b6 as te,aY as L,aL as ne,a7 as v,b7 as oe,b8 as ae,b9 as re,ba as se,bb as ie,bc as le,bd as ce,be as de,bf as ue,bg as me,bh as he,ad as be,ae as pe}from"../multikey/multikey.B-gp-w2q.js";import{u as fe,g as Ce,k as ye,h as ge,M as xe,a as S}from"../multikey/multikey.DDolodBD.js";const we=()=>{const{t:a}=Z(),b=window.location.protocol+"//"+window.location.host,[C,k]=o.useState(null),{id:l,keyId:u,tokenSymbol:p}=G(),[s,$]=o.useState(b),[U,q]=o.useState(null),[m,D]=o.useState(""),[c,I]=o.useState(null),[F,y]=o.useState(!1),g=fe(Ce),z=o.useCallback(()=>{$(`${b}/collection/${p}/${l}/${u}/${m||0}`)},[m,b,l,u,p]),A=o.useMemo(()=>[{jsonrpc:"2.0",method:"ibax.getBalance",id:1,params:[ye.addressString(u),Number(l)]}],[l,u]),B=o.useCallback(async()=>{const t=await ge(A);if(t&&t[0].result){const n=t[0].result;q(n)}},[A]);o.useEffect(()=>{B()},[B]),o.useEffect(()=>{z()},[z]);const T=o.useCallback(t=>{if(Number(t)<0){const n={text:a("home.maxZero"),boo:!0};return I(n),!1}else return I({text:"",boo:!1}),!0},[a]),Q=t=>{const{value:n}=t.target;Number(n)>=0&&(D(S.formatDecimalPlaces(n,U.digits)),T(n)&&$(()=>`${b}/collection/${p}/${l}/${u}/${m}`))},j=()=>{y(!1)},N=()=>{y(!0),S.copyToClipboard(s)},O=t=>{const n=t.split(","),r=n[0].match(/:(.*?);/)[1],f=atob(n[1]);let d=f.length;const R=new Uint8Array(d);for(;d--;)R[d]=f.charCodeAt(d);return new Blob([R],{type:r})},W=(t,n)=>{const r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download",n),r.setAttribute("target","_blank"),r.dispatchEvent(new MouseEvent("click"))},H=()=>{if(T(m)){const r=document.getElementById("qrCode").toDataURL("image/png"),f=O(r),d=URL.createObjectURL(f);W(d,"qrCode")}},P=()=>{S.copyToClipboard(g.wallet),y(!0)},V=t=>{k(C?null:t.currentTarget)},E=!!C,M=E?"simple-popper":void 0,_=()=>{k(null)};return i(xe,{children:[e(x,{variant:"h5",mb:3,children:a("home.receive")}),i(h,{sx:{width:{md:"80%",sm:"100%"}},textAlign:"center",m:"auto",mb:2,children:[e(x,{variant:"body1",mb:1,children:g.team_name}),i(w,{direction:"row",justifyContent:"center",alignItems:"center",children:[e(x,{variant:"body1",children:g.wallet}),e(Y,{"aria-label":"ContentCopyIcon",onClick:P,size:"medium",children:e(X,{fontSize:"medium"})})]})]}),e(w,{direction:"row",justifyContent:"center",alignItems:"center",mb:3,children:e(h,{children:e(J,{id:"qrCode",value:s,size:128,imageSettings:{excavate:!0,src:"",width:30,height:30}})})}),e(h,{display:"flex",justifyContent:"center",children:i(h,{sx:{width:{md:"80%",sm:"100%"}},children:[i(K,{fullWidth:!0,sx:{mb:2},children:[e(ee,{htmlFor:"outlined-adornment-count",required:!0,sx:{fontSize:16},error:c?c.boo:!1,children:a("home.count")}),e(te,{id:"outlined-adornment-count",placeholder:a("home.collection"),type:"InputNumber",autoComplete:"off",size:"medium",fullWidth:!0,value:m,onChange:Q,startAdornment:e(L,{position:"start"}),endAdornment:e(L,{position:"end",children:p}),label:a("home.count"),error:c?c.boo:!1}),e(ne,{error:!0,children:c?c.text:""})]}),i(w,{direction:"row",justifyContent:"space-between",flexWrap:"wrap",children:[e(v,{color:"primary",variant:"extended",size:"medium",onClick:H,sx:{fontSize:12,px:2,minWidth:120},children:a("home.saveqr")}),e(v,{color:"primary",variant:"extended",size:"medium",onClick:N,sx:{fontSize:12,px:2,minWidth:120},children:a("home.cody")}),e(v,{color:"primary",variant:"extended",size:"medium",sx:{fontSize:12,px:2,minWidth:120},"aria-describedby":M,onClick:V,children:a("home.give")})]})]})}),e(he,{id:l,open:E,anchorEl:C,onClose:_,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:i(h,{p:2,display:"flex",width:200,justifyContent:"space-between",children:[e(oe,{url:s,children:e(ae,{size:30,round:!0})}),e(re,{url:s,children:e(se,{size:30,round:!0})}),e(ie,{url:s,children:e(le,{size:30,round:!0})}),e(ce,{url:s,children:e(de,{size:30,round:!0})}),e(ue,{url:s,children:e(me,{size:30,round:!0})})]})}),e(pe,{anchorOrigin:{vertical:"top",horizontal:"center"},open:F,onClose:j,autoHideDuration:2e3,children:e(be,{onClose:j,severity:"success",variant:"filled",sx:{width:"100%"},children:a("login.cody")})})]})};we.displayName="ReceivePage";export{we as Component};
